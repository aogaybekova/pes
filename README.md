# SpotMicro Smart Control System

–£–º–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–æ–±–æ—Ç–æ–º-—Å–æ–±–∞–∫–æ–π SpotMicro —Å –≥–æ–ª–æ—Å–æ–≤—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º, –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–µ–π –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ –∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üé§ –ì–æ–ª–æ—Å–æ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ (Vosk)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ–±—Ö–æ–¥ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π –ø—Ä–∏ –∫–æ–º–∞–Ω–¥–µ "–≤–ø–µ—Ä–µ–¥"
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–º–∞–Ω–¥ –¥–≤–∏–∂–µ–Ω–∏—è, –ø–æ–∑ –∏ –∂–µ—Å—Ç–æ–≤

### üì° –î–∞—Ç—á–∏–∫–∏ –∏ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è
- **–£–ª—å—Ç—Ä–∞–∑–≤—É–∫–æ–≤—ã–µ –¥–∞—Ç—á–∏–∫–∏ HC-SR04**: –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π —Å–ª–µ–≤–∞ (GPIO 14/15) –∏ —Å–ø—Ä–∞–≤–∞ (GPIO 23/24)
- **–î–∞—Ç—á–∏–∫ –∫–∞—Å–∞–Ω–∏—è** (GPIO 17): –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- **MPU6050**: –¥–∞–Ω–Ω—ã–µ –∞–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä–∞ –∏ –≥–∏—Ä–æ—Å–∫–æ–ø–∞

### ü§ñ –£–º–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ–±—Ö–æ–¥ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –≤–ø–µ—Ä–µ–¥
- –ü–æ–≤–æ—Ä–æ—Ç –≤ —Å—Ç–æ—Ä–æ–Ω—É —Å –±–æ–ª—å—à–∏–º —Å–≤–æ–±–æ–¥–Ω—ã–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ–º
- –†–µ–∞–∫—Ü–∏—è –Ω–∞ –∫–∞—Å–∞–Ω–∏–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è:
  - –í –¥–≤–∏–∂–µ–Ω–∏–∏ ‚Üí –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
  - –°—Ç–æ–∏—Ç ‚Üí —Å–∞–¥–∏—Ç—Å—è –∏ –¥–∞–µ—Ç –ª–∞–ø—É
  - –°–∏–¥–∏—Ç ‚Üí –¥–∞–µ—Ç –ª–∞–ø—É

### üìä –û–±—É—á–µ–Ω–∏–µ —Å –ø–æ–¥–∫—Ä–µ–ø–ª–µ–Ω–∏–µ–º
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π —Å—Ä–µ–¥—ã (–¥–∞—Ç—á–∏–∫–∏, –ø–æ–∑–∏—Ü–∏—è, –¥–µ–π—Å—Ç–≤–∏—è)
- –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ

### üåê –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –£–¥–∞–ª–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–∞—Ç—á–∏–∫–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–º–µ—Ä–æ–π (–∞–∫—Ç–∏–≤–∞—Ü–∏—è, —Å—ä–µ–º–∫–∞)
- –ì–∞–ª–µ—Ä–µ—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ
- –ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (WASD, —Å—Ç—Ä–µ–ª–∫–∏)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
‚îú‚îÄ‚îÄ smart_control.py      # –£–º–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å –¥–∞—Ç—á–∏–∫–∞–º–∏ –∏ –≥–æ–ª–æ—Å–æ–º
‚îú‚îÄ‚îÄ web_app.py            # –í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Flask
‚îú‚îÄ‚îÄ rl_data_logger.py     # –õ–æ–≥–≥–µ—Ä –¥–∞–Ω–Ω—ã—Ö –¥–ª—è RL
‚îú‚îÄ‚îÄ oop.py                # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä SpotMicro
‚îú‚îÄ‚îÄ work_with_voice.py    # –ì–æ–ª–æ—Å–æ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–æ—Ä–∏–≥–∏–Ω–∞–ª)
‚îú‚îÄ‚îÄ 2_hc_sr04.py          # –†–∞–±–æ—Ç–∞ —Å –¥–∞—Ç—á–∏–∫–∞–º–∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è
‚îú‚îÄ‚îÄ sensor_button.py      # –†–∞–±–æ—Ç–∞ —Å –¥–∞—Ç—á–∏–∫–æ–º –∫–∞—Å–∞–Ω–∏—è
‚îú‚îÄ‚îÄ photos/               # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Ñ–æ—Ç–æ —Å –∫–∞–º–µ—Ä—ã
‚îú‚îÄ‚îÄ rl_data/              # –î–∞–Ω–Ω—ã–µ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
‚îî‚îÄ‚îÄ templates/            # HTML —à–∞–±–ª–æ–Ω—ã –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
# –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install flask vosk pyaudio numpy pygame

# –î–ª—è Raspberry Pi
pip install RPi.GPIO adafruit-circuitpython-pca9685 adafruit-circuitpython-mpu6050
pip install adafruit-circuitpython-servokit picamera2
```

### –ú–æ–¥–µ–ª—å Vosk

–°–∫–∞—á–∞–π—Ç–µ —Ä—É—Å—Å–∫—É—é –º–æ–¥–µ–ª—å –∏ —Ä–∞—Å–ø–∞–∫—É–π—Ç–µ –≤ `/home/rpi/sr_model/`:
```bash
wget https://alphacephei.com/vosk/models/vosk-model-small-ru-0.22.zip
unzip vosk-model-small-ru-0.22.zip -d /home/rpi/sr_model/
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|------------|----------|--------------|
| `VOSK_MODEL_PATH` | –ü—É—Ç—å –∫ –º–æ–¥–µ–ª–∏ Vosk | `/home/rpi/sr_model/vosk-model-small-ru-0.22/` |
| `SIT_COMMAND_DELAY` | –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –¥–∞—á–µ–π –ª–∞–ø—ã –ø–æ—Å–ª–µ –∫–æ–º–∞–Ω–¥—ã —Å–µ—Å—Ç—å (—Å–µ–∫) | `2.0` |
| `TOUCH_DEBOUNCE_TIME` | –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –æ–±—Ä–∞–±–æ—Ç–∫–∞–º–∏ –¥–∞—Ç—á–∏–∫–∞ –∫–∞—Å–∞–Ω–∏—è (—Å–µ–∫) | `1.0` |
| `HOST` | –ê–¥—Ä–µ—Å —Ö–æ—Å—Ç–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ | `0.0.0.0` |
| `PORT` | –ü–æ—Ä—Ç –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ | `5000` |
```

## –ó–∞–ø—É—Å–∫

### –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (–≥–æ–ª–æ—Å + –¥–∞—Ç—á–∏–∫–∏ + —Ä–æ–±–æ—Ç)
```bash
python3 smart_control.py
```

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
```bash
python3 web_app.py
# –û—Ç–∫—Ä–æ–π—Ç–µ http://IP_RASPBERRY:5000 –≤ –±—Ä–∞—É–∑–µ—Ä–µ
```

### –†–µ–∂–∏–º—ã –∑–∞–ø—É—Å–∫–∞
```bash
# –ë–µ–∑ —Ä–æ–±–æ—Ç–∞ (—Å–∏–º—É–ª—è—Ü–∏—è)
python3 smart_control.py --no-robot

# –ë–µ–∑ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
python3 smart_control.py --no-voice

# –ë–µ–∑ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è RL –¥–∞–Ω–Ω—ã—Ö
python3 smart_control.py --no-log
```

## –ì–æ–ª–æ—Å–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –î–µ–π—Å—Ç–≤–∏–µ |
|---------|----------|
| –≤–ø–µ—Ä–µ–¥, –∏–¥–∏ | –î–≤–∏–∂–µ–Ω–∏–µ –≤–ø–µ—Ä–µ–¥ |
| –Ω–∞–∑–∞–¥ | –î–≤–∏–∂–µ–Ω–∏–µ –Ω–∞–∑–∞–¥ |
| –≤–ª–µ–≤–æ, –ª–µ–≤–æ | –ü–æ–≤–æ—Ä–æ—Ç –≤–ª–µ–≤–æ |
| –≤–ø—Ä–∞–≤–æ, –ø—Ä–∞–≤–æ | –ü–æ–≤–æ—Ä–æ—Ç –≤–ø—Ä–∞–≤–æ |
| —Å—Ç–æ–ø, –æ—Å—Ç–∞–Ω–æ–≤–∏—Å—å | –û—Å—Ç–∞–Ω–æ–≤–∫–∞ |
| —Å–µ—Å—Ç—å, —Å–∏–¥–µ—Ç—å | –°–µ—Å—Ç—å |
| –≤—Å—Ç–∞—Ç—å, —Å—Ç–∞—Ç—å | –í—Å—Ç–∞—Ç—å |
| –ª–µ—á—å | –õ–µ—á—å |
| –¥–∞–π –ª–∞–ø—É | –î–∞—Ç—å –ø—Ä–∞–≤—É—é –ª–∞–ø—É |
| –ª–µ–≤—É—é –ª–∞–ø—É | –î–∞—Ç—å –ª–µ–≤—É—é –ª–∞–ø—É |
| –æ–ø—É—Å—Ç–∏ –ª–∞–ø—ã | –û–ø—É—Å—Ç–∏—Ç—å –ª–∞–ø—ã |

## API –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

### –°—Ç–∞—Ç—É—Å
```
GET /api/status
```

### –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥—ã
```
POST /api/command
Body: {"command": "forward"}
```

### –ö–∞–º–µ—Ä–∞
```
POST /api/camera/activate   # –í–∫–ª—é—á–∏—Ç—å –∫–∞–º–µ—Ä—É
POST /api/camera/deactivate # –í—ã–∫–ª—é—á–∏—Ç—å –∫–∞–º–µ—Ä—É
POST /api/camera/photo      # –°–¥–µ–ª–∞—Ç—å —Ñ–æ—Ç–æ
GET  /api/camera/photos     # –°–ø–∏—Å–æ–∫ —Ñ–æ—Ç–æ
GET  /photos/<filename>     # –ü–æ–ª—É—á–∏—Ç—å —Ñ–æ—Ç–æ
```

### –û–±—É—á–µ–Ω–∏–µ
```
GET  /api/rl/stats          # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Å—Å–∏–∏
POST /api/rl/new_episode    # –ù–∞—á–∞—Ç—å –Ω–æ–≤—ã–π —ç–ø–∏–∑–æ–¥
```

## –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö RL

–ö–∞–∂–¥–∞—è –∑–∞–ø–∏—Å—å —Å–æ–¥–µ—Ä–∂–∏—Ç:
```json
{
  "timestamp": 1705851234.567,
  "episode": 0,
  "step": 42,
  "state": {
    "ultrasonic": {"left_cm": 45.2, "right_cm": 120.5},
    "touch": false,
    "mpu6050": {
      "acceleration": {"x": 0.1, "y": 0.2, "z": 9.8},
      "gyroscope": {"x": 0.0, "y": 0.1, "z": 0.0}
    },
    "robot_state": "walking",
    "flags": {"walking": true, "sitting": false, "lying": false}
  },
  "action": "forward",
  "reward": 0.5,
  "done": false
}
```

## –ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–≤–µ–±)

| –ö–ª–∞–≤–∏—à–∞ | –î–µ–π—Å—Ç–≤–∏–µ |
|---------|----------|
| W / ‚Üë | –í–ø–µ—Ä–µ–¥ |
| S / ‚Üì | –ù–∞–∑–∞–¥ |
| A / ‚Üê | –ü–æ–≤–æ—Ä–æ—Ç –≤–ª–µ–≤–æ |
| D / ‚Üí | –ü–æ–≤–æ—Ä–æ—Ç –≤–ø—Ä–∞–≤–æ |
| Space | –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è |
| Escape | –ê–≤–∞—Ä–∏–π–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ |

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License
